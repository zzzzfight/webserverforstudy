## version-6

* 当前版本
只是实现了通过Channel包装对fd的操作、
没有实现线程池


> 2022-4-26

* 没有考虑到ET模式下非阻塞read的函数设计（及非阻塞write）
* 没有考虑到httpdata类析构造成的问题（写计时器工具，设置延迟析构）(用时间轮的形式
.)
* 日志系统未写（日志工具类）
* 一次连接发生了两次epollin事件的处理（bug）

> 2022-4-28
* 计时器如果修改了时间 从算法角度不会改变堆结构，只有当进行插入或者删除操作时才会导致堆结构的改变，那么就不会产生一个问题，当修改的计时器正好在堆顶，则会影响删除造作。


> 2022-5-4
* 计时器分为两种情况
	* 超时情况，直接timemenage将timenode pop出，导致timenode析构，析构函数中函数调用使得eventloop中调用epoll中的关闭函数 回收一切于httpdata相关的资源，随后httpdata发生析构
	* 主动关闭
	释放timenode中持有的httpdata指针，然后设置delete（在判断时提示该节点可以删除）


> 2022-5-5
* 计时器的设计在空间性能上有影响，每次产生事件，都会删除删除计时器并且想管理器中添加计时器，开销从计时器的调整O（N^2）移动到计时器的添加O(N)，对于长连接，事件发生次数会影响计时器的增加O(N)和设置删除操作O(N)，惰性删除会使计时器的管理在空间上有影响，时间复杂度只有常数级增长
	* 时间轮/时间堆



> 2022-5-10
* BUG 
	* `newconn`中的非阻塞读`_listenfd`中判断errno由逻辑错误:
	`if(errno)`只判断了`errno==ewouldback`和`eagain`出现的其他errno没有因为判断而退出导致死循环
	* timer不断的push node  pop node， 但是该bug没有复现，暂时不管
	* 找不到bug 猜测是http解析的设计有逻辑问题，设计下一班 重写逻辑


* 计划
	* webserver的基本功能已经实现，接下来要做的优化：
	* 安全的使用资源，一个连接的创建到关闭，之间所调用的资源的安全使用
	* 逻辑优化：尝试用模板类代理httpdata和channel的关系
	* 一个异步日志的实现 ★